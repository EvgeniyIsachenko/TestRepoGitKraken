import secrets
import string
import pyperclip

def generate_custom_password(length=22):
    # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ω–∞–±–æ—Ä–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤
    forbidden = set('#"\'\\/|}[{~`')
    special_chars = "".join(c for c in string.punctuation if c not in forbidden)
    letters = string.ascii_letters
    digits = string.digits.replace('0', '') # –ò—Å–∫–ª—é—á–∞–µ–º 0 –ø–æ –≤–∞—à–µ–º—É —É—Å–ª–æ–≤–∏—é
    
    # 1. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã (–º–∏–Ω–∏–º—É–º 2 –Ω–µ-—Å–∏–º–≤–æ–ª–∞ –¥–ª—è –∫—Ä–∞–µ–≤)
    ends = [secrets.choice(letters + digits) for _ in range(2)]
    
    # 2. –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –æ—Å—Ç–∞–ª—å–Ω–æ–µ (20 —Å–∏–º–≤–æ–ª–æ–≤)
    # –†–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ–º –æ—Å—Ç–∞—Ç–æ–∫: 4 upper, 4 lower, 7 digits, 5 symbols (–ø—Ä–∏–º–µ—Ä)
    body = (
        [secrets.choice(string.ascii_uppercase) for _ in range(4)] +
        [secrets.choice(string.ascii_lowercase) for _ in range(4)] +
        [secrets.choice(digits) for _ in range(7)] +
        [secrets.choice(special_chars) for _ in range(5)]
    )
    
    # 3. –ü–µ—Ä–µ–º–µ—à–∏–≤–∞–µ–º —Ç–æ–ª—å–∫–æ —Ç–µ–ª–æ
    secrets.SystemRandom().shuffle(body)
    
    # 4. –°–±–æ—Ä–∫–∞: –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–µ-—Å–∏–º–≤–æ–ª + —Ç–µ–ª–æ + –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –Ω–µ-—Å–∏–º–≤–æ–ª
    return f"{ends[0]}{''.join(body)}{ends[1]}"

def main():
    print("\nüîí –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫—Ä–∏–ø—Ç–æ—Å—Ç–æ–π–∫–∏—Ö –ø–∞—Ä–æ–ª–µ–π üîí")
    COUNT = 10
    passwords = [generate_custom_password() for _ in range(COUNT)]

    for i, pwd in enumerate(passwords, 1):
        print(f"{i:2d}. {pwd}")

    while True:
        choice = input(f"\n–í—ã–±–µ—Ä–∏—Ç–µ –Ω–æ–º–µ—Ä (1-{COUNT}) –∏–ª–∏ Enter –¥–ª—è –≤—ã—Ö–æ–¥–∞: ").strip()
        if not choice: break

        if choice.isdigit():
            idx = int(choice)
            if 1 <= idx <= COUNT:
                selected = passwords[idx - 1]
                pyperclip.copy(selected)
                print(f"‚úì –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ –≤ –±—É—Ñ–µ—Ä!")
                continue
        
        print(f"–û—à–∏–±–∫–∞! –í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –æ—Ç 1 –¥–æ {COUNT}")

if __name__ == "__main__":
    main()
